// 变量已在vite.config.js中通过additionalData导入，无需重复导入

// 全局重置样式
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  height: 100%;
  box-sizing: border-box;
}

body {
  height: 100%;
  font-family: 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', '微软雅黑', Arial, sans-serif;
  font-size: $font-size-base;
  color: $text-primary;
  background-color: $bg-color-page;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#app {
  height: 100%;
}

// 清除浮动
.clearfix {
  &:before,
  &:after {
    content: "";
    display: table;
    clear: both;
  }
}

// 文本溢出处理
.text-overflow {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.text-overflow-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

// 居中对齐
.text-center {
  text-align: center;
}

.text-left {
  text-align: left;
}

.text-right {
  text-align: right;
}

// Flex 布局工具类
.flex {
  display: flex;
}

.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.flex-column {
  display: flex;
  flex-direction: column;
}

.flex-wrap {
  flex-wrap: wrap;
}

.flex-1 {
  flex: 1;
}

// 间距工具类
.mt-xs { margin-top: $spacing-xs; }
.mt-sm { margin-top: $spacing-sm; }
.mt-md { margin-top: $spacing-md; }
.mt-lg { margin-top: $spacing-lg; }
.mt-xl { margin-top: $spacing-xl; }

.mb-xs { margin-bottom: $spacing-xs; }
.mb-sm { margin-bottom: $spacing-sm; }
.mb-md { margin-bottom: $spacing-md; }
.mb-lg { margin-bottom: $spacing-lg; }
.mb-xl { margin-bottom: $spacing-xl; }

.ml-xs { margin-left: $spacing-xs; }
.ml-sm { margin-left: $spacing-sm; }
.ml-md { margin-left: $spacing-md; }
.ml-lg { margin-left: $spacing-lg; }
.ml-xl { margin-left: $spacing-xl; }

.mr-xs { margin-right: $spacing-xs; }
.mr-sm { margin-right: $spacing-sm; }
.mr-md { margin-right: $spacing-md; }
.mr-lg { margin-right: $spacing-lg; }
.mr-xl { margin-right: $spacing-xl; }

.pt-xs { padding-top: $spacing-xs; }
.pt-sm { padding-top: $spacing-sm; }
.pt-md { padding-top: $spacing-md; }
.pt-lg { padding-top: $spacing-lg; }
.pt-xl { padding-top: $spacing-xl; }

.pb-xs { padding-bottom: $spacing-xs; }
.pb-sm { padding-bottom: $spacing-sm; }
.pb-md { padding-bottom: $spacing-md; }
.pb-lg { padding-bottom: $spacing-lg; }
.pb-xl { padding-bottom: $spacing-xl; }

.pl-xs { padding-left: $spacing-xs; }
.pl-sm { padding-left: $spacing-sm; }
.pl-md { padding-left: $spacing-md; }
.pl-lg { padding-left: $spacing-lg; }
.pl-xl { padding-left: $spacing-xl; }

.pr-xs { padding-right: $spacing-xs; }
.pr-sm { padding-right: $spacing-sm; }
.pr-md { padding-right: $spacing-md; }
.pr-lg { padding-right: $spacing-lg; }
.pr-xl { padding-right: $spacing-xl; }

// 页面容器样式
.app-container {
  padding: $spacing-lg;
}

.page-container {
  background: $bg-color;
  padding: $spacing-lg;
  margin: $spacing-md;
  border-radius: $card-border-radius;
  box-shadow: $card-shadow;
}

// 卡片样式
.custom-card {
  background: $bg-color;
  border-radius: $card-border-radius;
  box-shadow: $card-shadow;
  padding: $spacing-lg;
  margin-bottom: $spacing-md;
}

// 状态颜色
.status-success {
  color: $success-color;
}

.status-warning {
  color: $warning-color;
}

.status-danger {
  color: $danger-color;
}

.status-info {
  color: $info-color;
}

// 响应式隐藏类
@media (max-width: $breakpoint-sm) {
  .hidden-sm-and-down {
    display: none !important;
  }
}

@media (max-width: $breakpoint-md) {
  .hidden-md-and-down {
    display: none !important;
  }
}

// 滚动条样式
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: $border-color-extra-light;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: $border-color-base;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: $border-color-light;
}

// Element Plus 自定义样式覆盖
.el-button--text {
  padding: 0;
}

.el-card {
  border-radius: $card-border-radius;
  box-shadow: $card-shadow;
}

.el-table {
  .el-table__header {
    th {
      background-color: $bg-color-base;
      color: $text-primary;
      font-weight: 500;
    }
  }
}

.el-loading-mask {
  background-color: rgba(255, 255, 255, 0.9);
}

// 深色主题样式
.dark {
  // 全局背景和文字颜色
  body {
    background-color: #1d1e1f;
    color: #e4e7ed;
  }

  // 页面背景色
  .app-wrapper {
    background-color: #1d1e1f;
  }

  // 主内容区域
  .app-main {
    background-color: #1d1e1f;
  }

  // 卡片和容器样式 - 强制覆盖
  .el-card,
  .el-card .el-card__header,
  .el-card .el-card__body {
    background-color: #2d2d2d !important;
    border-color: #4c4d4f !important;
    color: #e4e7ed !important;
  }
  
  .el-card {
    .el-card__header {
      background-color: #2d2d2d !important;
      border-bottom-color: #4c4d4f !important;
      color: #e4e7ed !important;
    }
    
    .el-card__body {
      background-color: #2d2d2d !important;
      color: #e4e7ed !important;
    }
  }
  
  // 确保所有卡片容器背景正确
  .chart-card,
  .stat-card,
  .custom-card {
    background-color: #2d2d2d !important;
    color: #e4e7ed !important;
  }

  // 页面容器
  .page-container,
  .custom-card {
    background-color: #2d2d2d;
    color: #e4e7ed;
    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.3);
  }

  // 统计卡片
  .stat-card {
    background-color: #2d2d2d !important;
    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.3) !important;
    
    .stat-number {
      color: #e4e7ed !important;
    }
    
    .stat-label {
      color: #909399 !important;
    }
  }

  // 项目列表项
  .project-item {
    border-bottom-color: #4c4d4f !important;
    
    &:hover {
      background-color: #363637 !important;
    }
    
    .project-name {
      color: #e4e7ed !important;
    }
    
    .project-meta {
      .project-location,
      .project-date {
        color: #909399 !important;
      }
    }
  }

  // 通知列表
  .notification-item {
    border-bottom-color: #4c4d4f !important;
    
    &:hover {
      background-color: #363637 !important;
    }
    
    .notification-title {
      color: #e4e7ed !important;
    }
    
    .notification-date {
      color: #909399 !important;
    }
  }

  // 文字颜色
  .card-title {
    color: #e4e7ed !important;
  }

  .text-primary {
    color: #e4e7ed !important;
  }

  .text-regular {
    color: #c0c4cc !important;
  }

  .text-secondary {
    color: #909399 !important;
  }

  // Element Plus 组件深色主题 - 强制优先级
  .el-button {
    background-color: #2d2d2d !important;
    border-color: #4c4d4f !important;
    color: #e4e7ed !important;
    
    &:hover {
      background-color: #363637 !important;
      border-color: #5a5e66 !important;
    }
    
    &.el-button--default {
      background-color: #2d2d2d !important;
      border-color: #4c4d4f !important;
      color: #e4e7ed !important;
      
      &:hover {
        background-color: #363637 !important;
        border-color: #5a5e66 !important;
        color: #e4e7ed !important;
      }
    }
    
    &.el-button--primary {
      background-color: #409EFF !important;
      border-color: #409EFF !important;
      color: #fff !important;
      
      &:hover {
        background-color: #66b1ff !important;
        border-color: #66b1ff !important;
      }
    }
    
    &.is-link {
      color: #409EFF !important;
      background: transparent !important;
      border: none !important;
      
      &:hover {
        color: #66b1ff !important;
        background: transparent !important;
      }
    }
  }

  .el-input {
    .el-input__wrapper {
      background-color: #2d2d2d !important;
      border: 1px solid #4c4d4f !important;
      box-shadow: none !important;
      
      &:hover {
        border-color: #5a5e66 !important;
      }
      
      &.is-focus {
        border-color: #409EFF !important;
      }
      
      .el-input__inner {
        background-color: transparent !important;
        color: #e4e7ed !important;
        
        &::placeholder {
          color: #909399 !important;
        }
      }
      
      .el-input__suffix,
      .el-input__prefix {
        .el-input__icon {
          color: #909399;
        }
      }
    }
  }

  .el-select {
    .el-input {
      .el-input__wrapper {
        background-color: #2d2d2d !important;
        border-color: #4c4d4f !important;
        
        .el-input__inner {
          color: #e4e7ed !important;
        }
      }
    }
  }
  
  .el-select-dropdown {
    background-color: #2d2d2d !important;
    border-color: #4c4d4f !important;
    
    .el-select-dropdown__item {
      background-color: #2d2d2d !important;
      color: #e4e7ed !important;
      
      &:hover {
        background-color: #363637 !important;
      }
      
      &.selected {
        background-color: #409EFF !important;
        color: #fff !important;
      }
    }
  }
  
  .el-date-editor {
    .el-input__wrapper {
      background-color: #2d2d2d !important;
      border-color: #4c4d4f !important;
      
      .el-input__inner {
        color: #e4e7ed !important;
        
        &::placeholder {
          color: #909399 !important;
        }
      }
    }
  }
  
  .el-picker-panel {
    background-color: #2d2d2d !important;
    border-color: #4c4d4f !important;
    
    .el-date-picker__header {
      color: #e4e7ed !important;
    }
    
    .el-picker-panel__content {
      color: #e4e7ed !important;
    }
  }
  
  .el-dropdown {
    .el-dropdown-menu {
      background-color: #2d2d2d !important;
      border-color: #4c4d4f !important;
      
      .el-dropdown-menu__item {
        color: #e4e7ed !important;
        
        &:hover {
          background-color: #363637 !important;
        }
      }
    }
  }

  .el-table {
    background-color: #2d2d2d;
    color: #e4e7ed;
    
    .el-table__header {
      th {
        background-color: #363637 !important;
        color: #e4e7ed !important;
        border-bottom-color: #4c4d4f !important;
      }
    }
    
    .el-table__body {
      tr {
        background-color: #2d2d2d;
        
        &:hover {
          background-color: #363637 !important;
        }
        
        td {
          border-bottom-color: #4c4d4f !important;
          color: #e4e7ed;
        }
      }
    }
  }
  
  .el-pagination {
    .el-pager {
      li {
        background-color: #2d2d2d !important;
        color: #e4e7ed !important;
        border: 1px solid #4c4d4f !important;
        
        &:hover {
          background-color: #363637 !important;
        }
        
        &.active {
          background-color: #409EFF !important;
          color: #fff !important;
        }
      }
    }
    
    .el-pagination__jump {
      color: #e4e7ed !important;
      
      .el-input {
        .el-input__wrapper {
          background-color: #2d2d2d !important;
          border-color: #4c4d4f !important;
        }
      }
    }
    
    .el-pagination__sizes {
      .el-select {
        .el-input__wrapper {
          background-color: #2d2d2d !important;
          border-color: #4c4d4f !important;
        }
      }
    }
    
    .el-pagination__total,
    .btn-prev,
    .btn-next {
      color: #e4e7ed !important;
      
      &:hover {
        color: #409EFF !important;
      }
    }
    
    .btn-prev,
    .btn-next {
      background-color: #2d2d2d !important;
      border: 1px solid #4c4d4f !important;
      
      &:hover {
        background-color: #363637 !important;
        border-color: #5a5e66 !important;
      }
      
      &:disabled {
        color: #5a5e66 !important;
        background-color: #2d2d2d !important;
        border-color: #4c4d4f !important;
      }
    }
  }
  
  .el-form {
    .el-form-item__label {
      color: #e4e7ed !important;
    }
    
    .el-form-item__error {
      color: #F56C6C !important;
    }
  }
  
  .el-message {
    background-color: #2d2d2d !important;
    border-color: #4c4d4f !important;
    color: #e4e7ed !important;
    
    &.el-message--success {
      background-color: #1f2f23 !important;
      border-color: #2d4a2d !important;
      color: #67C23A !important;
    }
    
    &.el-message--warning {
      background-color: #2f2a1f !important;
      border-color: #4a3f2d !important;
      color: #E6A23C !important;
    }
    
    &.el-message--error {
      background-color: #2f1f1f !important;
      border-color: #4a2d2d !important;
      color: #F56C6C !important;
    }
  }
  
  .el-dialog {
    background-color: #2d2d2d !important;
    
    .el-dialog__header {
      border-bottom-color: #4c4d4f !important;
      
      .el-dialog__title {
        color: #e4e7ed !important;
      }
      
      .el-dialog__close {
        color: #909399 !important;
        
        &:hover {
          color: #e4e7ed !important;
        }
      }
    }
    
    .el-dialog__body {
      color: #e4e7ed !important;
    }
    
    .el-dialog__footer {
      border-top-color: #4c4d4f !important;
    }
  }
  
  .el-drawer {
    background-color: #2d2d2d !important;
    
    .el-drawer__header {
      color: #e4e7ed !important;
      border-bottom-color: #4c4d4f !important;
    }
    
    .el-drawer__body {
      color: #e4e7ed !important;
    }
  }

  // 加载遮罩
  .el-loading-mask {
    background-color: rgba(29, 30, 31, 0.9) !important;
    
    .el-loading-spinner {
      .path {
        stroke: #409EFF;
      }
      
      .el-loading-text {
        color: #e4e7ed;
      }
    }
  }

  // 滚动条深色样式
  ::-webkit-scrollbar-track {
    background: #2d2d2d;
  }
  
  ::-webkit-scrollbar-thumb {
    background: #4c4d4f;
    
    &:hover {
      background: #5a5e66;
    }
  }

  // 全局强制深色主题样式 - 最高优先级
  * {
    &:not(.el-button--primary):not(.el-button--success):not(.el-button--warning):not(.el-button--danger) {
      &.el-card,
      &.chart-card,
      &.stat-card,
      &.custom-card {
        background-color: #2d2d2d !important;
        color: #e4e7ed !important;
        border-color: #4c4d4f !important;
      }
    }
  }
  
  // 确保页面容器深色背景
  .app-main,
  .chart-demo-page,
  .dashboard-container,
  .page-container {
    background-color: #1d1e1f !important;
    color: #e4e7ed !important;
  }
  
  // 强制所有白色背景变为深色
  [style*="background: white"],
  [style*="background-color: white"],
  [style*="background: #fff"],
  [style*="background-color: #fff"],
  [style*="background-color: #ffffff"] {
    background-color: #2d2d2d !important;
  }
}